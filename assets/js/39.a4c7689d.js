(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{326:function(s,t,a){s.exports=a.p+"assets/img/git01.806b54a9.png"},443:function(s,t,a){s.exports=a.p+"assets/img/git-log.3e8ffa3b.png"},690:function(s,t,a){"use strict";a.r(t);var e=a(26),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"git-学习笔记"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#git-学习笔记"}},[s._v("#")]),s._v(" git 学习笔记")]),s._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://git-scm.com/book/zh/v2",target:"_blank",rel:"noopener noreferrer"}},[s._v("git book"),e("OutboundLink")],1)])]),s._v(" "),e("p",[s._v("为避免由于物理层面的意外，导致代码的丢失，有必要将本地代码托管到一个靠谱的云平台。")]),s._v(" "),e("p",[s._v("git是一个开源的分布式版本控制系统，可以有效、高速地处理从很小到非常大的项目版本管理。Git 是分布式的，每台电脑拥有的东西都是一样的。Git 有中心服务器，仅仅是为了方便交换大家的修改，但是这个服务器的地位和其他每个人的PC是一样的。")]),s._v(" "),e("p",[s._v("常用的 git 管理平台很多，由于众所周知的原因，本文使用 "),e("a",{attrs:{href:"https://gitee.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("gitee"),e("OutboundLink")],1),s._v(" 做代码托管。")]),s._v(" "),e("h2",{attrs:{id:"_1-基本概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-基本概念"}},[s._v("#")]),s._v(" 1. 基本概念")]),s._v(" "),e("p",[e("img",{attrs:{src:a(326),alt:""}})]),s._v(" "),e("ul",[e("li",[e("p",[e("strong",[s._v("远程仓库")]),s._v("：在局域网或互联网上的一个主机，存放代码库的主机或平台，比如"),e("code",[s._v("gitee.com(码云)")])])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("本地仓库")]),s._v("：在本地主机上的一个代码库，可以独立存在，也可以与远程仓库进行关联。"),e("code",[s._v(".git文件夹")]),s._v("目录中存储了很多配置信息、日志信息和文件版本信息、工作区、暂存区信息等。")])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("暂存区")]),s._v("：把修订的文件，从工作区经过 "),e("code",[s._v("add（添加）")]),s._v("后与某一个仓库分支进行关联，只要进入缓存区的文件才能 "),e("code",[s._v("commit")]),s._v(" (提交)到本地仓库。"),e("code",[s._v(".git文件夹")]),s._v("中有很多文件，其中有一个 "),e("code",[s._v("index")]),s._v(" 文件就是暂存区，也可以叫做 "),e("code",[s._v("stage")]),s._v(" 。 "),e("code",[s._v("暂存区")]),s._v(" 是一个临时保存修改文件的地方。")])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("工作区")]),s._v("：对任何文件的修订，都在工作区，工作区不与任何仓库关联，需要通过暂存区提交到本地仓库。")])])]),s._v(" "),e("h2",{attrs:{id:"_2-基本推送流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-基本推送流程"}},[s._v("#")]),s._v(" 2. 基本推送流程")]),s._v(" "),e("h3",{attrs:{id:"_2-1-新建-远程仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-新建-远程仓库"}},[s._v("#")]),s._v(" 2.1 新建 远程仓库")]),s._v(" "),e("p",[s._v("由于本地项目是业务代码，考虑到安全性，选择创建私有仓库。")]),s._v(" "),e("h3",{attrs:{id:"_2-2-远程仓库-本地仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-远程仓库-本地仓库"}},[s._v("#")]),s._v(" 2.2 远程仓库 -> 本地仓库")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# clone 命令")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://gitee.com/anontree/wh_mapping.git\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("clone 私有仓库时，输入上述命令后，会被要求输入用户名和密码，且该用户需为私有仓库中的成员。")]),s._v(" "),e("p",[s._v("使用 clone 命令时，除了将 "),e("code",[s._v("远程仓库")]),s._v(" 的内容拉取到 "),e("code",[s._v("本地仓库")]),s._v(" ，还会直接把内容 "),e("code",[s._v("checkout")]),s._v(" 到 "),e("code",[s._v("工作区")]),s._v(" 。")]),s._v(" "),e("p",[s._v("上述命令执行完毕后，会生成 "),e("code",[s._v("wh_mapping")]),s._v(" 文件夹，进入文件夹，即可看到 "),e("code",[s._v("远程仓库")]),s._v(" 中的代码。")]),s._v(" "),e("p",[s._v("因为是新建的仓库，所以看到的内容应该是空的。如果在新建仓库时勾选了 "),e("code",[s._v("README.md")]),s._v(" 选项，则会在本地看到这个 "),e("code",[s._v("gitee")]),s._v(" 自动生成的 "),e("code",[s._v("README.md")]),s._v(" 。")]),s._v(" "),e("h3",{attrs:{id:"_2-3-已有代码-暂存区"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-已有代码-暂存区"}},[s._v("#")]),s._v(" 2.3 已有代码  ->  暂存区")]),s._v(" "),e("p",[s._v("将本地已有的所有项目文件 "),e("code",[s._v("copy")]),s._v(" 到 "),e("code",[s._v("wh_mapping")]),s._v(" 文件夹中，这时，等于把文件放到了 "),e("code",[s._v("工作区")]),s._v(" 。")]),s._v(" "),e("p",[s._v("为了将 "),e("code",[s._v("工作区")]),s._v(" 的文件更新到 "),e("code",[s._v("本地仓库")]),s._v(" ，乃至提交到 "),e("code",[s._v("远程仓库")]),s._v(" ，首先需要把文件添加到 "),e("code",[s._v("缓存区")]),s._v(" ：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加变化的文件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" test.js\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 也可添加所有修改过/新增的文件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("此时修改的内容已经来到 "),e("code",[s._v("暂存区")]),s._v(" ，可以查看详情：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看暂存区的状态")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 简写的状态（推荐使用）")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status -s\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("既然是 "),e("code",[s._v("暂存区")]),s._v(" ，就可以把不想提交的内容 撤销 回来：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# git reset 文件名")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset test.js\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("在我们的 "),e("code",[s._v("工作区")]),s._v(" 中，有一些文件可能比较大，或者太琐碎，不需要通过远程管理，比如 "),e("code",[s._v("node_modules")]),s._v(" 里的库文件。")]),s._v(" "),e("p",[s._v("可以在 "),e("code",[s._v(".gitignore")]),s._v(" 中进行设置：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wh_mapping/.gitignore")]),s._v("\nnode_modules/ "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 库文件夹下的所有文件")]),s._v("\n.vscode "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vscode 配置文件")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"_2-4-暂存区-本地仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-暂存区-本地仓库"}},[s._v("#")]),s._v(" 2.4 暂存区 -> 本地仓库")]),s._v(" "),e("p",[s._v("使用 "),e("code",[s._v("commit")]),s._v(" 命令，从 "),e("code",[s._v("暂存区")]),s._v(" 提交到 "),e("code",[s._v("本地仓库")]),s._v(" ：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'这里写提交的一些情况说明'")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("这样， "),e("code",[s._v("工作区")]),s._v(" 的变化就已经保存到 "),e("code",[s._v("本地仓库")]),s._v(" 了。")]),s._v(" "),e("h3",{attrs:{id:"_2-5-本地仓库-远程仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-本地仓库-远程仓库"}},[s._v("#")]),s._v(" 2.5 本地仓库 -> 远程仓库")]),s._v(" "),e("p",[s._v("使用 "),e("code",[s._v("push")]),s._v(" 命令，把变更提交到 "),e("code",[s._v("远程仓库")]),s._v(" ：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# git push 远端仓库名 分支名")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin master\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("因为这是初次提交，不存在代码冲突情况。但实际情况，在提交变更的时候，可能此时的 "),e("code",[s._v("远程仓库")]),s._v(" 已经在 "),e("code",[s._v("clone")]),s._v(" 之后有了新的变化，所以需要在 "),e("code",[s._v("push")]),s._v(" 之前，重新获取一下 "),e("code",[s._v("远程仓库")]),s._v(" 的内容，并与 "),e("code",[s._v("工作区")]),s._v(" 的内容 "),e("code",[s._v("合并（merge）")]),s._v(" 起来：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# git pull 远端仓库名 分支名")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull origin master\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("使用 "),e("code",[s._v("pull")]),s._v(" 命令，会在拉取 "),e("code",[s._v("远端仓库")]),s._v(" 之后，自动把变更 "),e("code",[s._v("合并")]),s._v(" 到 "),e("code",[s._v("工作区")]),s._v(" 中，如果存在冲突，则需先解决冲突（线下方式），再进行 "),e("code",[s._v("push")]),s._v(" 。")]),s._v(" "),e("h3",{attrs:{id:"_2-6-小结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-小结"}},[s._v("#")]),s._v(" 2.6 小结")]),s._v(" "),e("p",[s._v("这样，就基本实现了本地代码的远程托管，每次做了修改之后，就以下一通操作：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加到暂存区")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 转到本地仓库")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'提交信息'")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取远程变化")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull origin master\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 提交到远程仓库")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin master\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),e("p",[s._v("如有冲突，则解决冲突后，需要重新 add + commit + pull + push")])]),s._v(" "),e("h2",{attrs:{id:"_3-最佳实践"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-最佳实践"}},[s._v("#")]),s._v(" 3. 最佳实践")]),s._v(" "),e("h3",{attrs:{id:"_3-1-提交规范"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-提交规范"}},[s._v("#")]),s._v(" 3.1 提交规范")]),s._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Commit message 和 Change log 编写指南——阮一峰"),e("OutboundLink")],1)])]),s._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2015/08/git-use-process.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Git 使用规范流程——阮一峰"),e("OutboundLink")],1)])]),s._v(" "),e("ul",[e("li",[s._v("feat: 新增功能")]),s._v(" "),e("li",[s._v("fix: 修复 bug")]),s._v(" "),e("li",[s._v("docs: 文档相关的改动")]),s._v(" "),e("li",[s._v("style: 对代码的格式化改动，代码逻辑并未产生任何变化(例如代码缩进，分号的移除和添加)")]),s._v(" "),e("li",[s._v("test: 新增或修改测试用例")]),s._v(" "),e("li",[s._v("refactor: 重构代码或其他优化举措")]),s._v(" "),e("li",[s._v("chore: 项目工程（构建工具等）方面的改动，代码逻辑并未产生任何变化")]),s._v(" "),e("li",[s._v("revert: 恢复之前的提交")])]),s._v(" "),e("h2",{attrs:{id:"_4-git-工作流"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-git-工作流"}},[s._v("#")]),s._v(" 4. git 工作流")]),s._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://guides.github.com/introduction/flow/",target:"_blank",rel:"noopener noreferrer"}},[s._v("目前最流行的 github 分支模型"),e("OutboundLink")],1)])]),s._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2015/12/git-workflow.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Git 工作流程——阮一峰"),e("OutboundLink")],1)])]),s._v(" "),e("p",[s._v("Git 作为一个源码管理系统，不可避免涉及到多人协作。协作必须有一个规范的工作流程，让大家有效地合作，使得项目井井有条地发展下去。")]),s._v(" "),e("p",[s._v("工作流是"),e("strong",[s._v("功能驱动开发")]),s._v("模式，即需求是开发的起点，先有需求再有功能分支（feature branch）或者补丁分支（hotfix branch）。完成开发后，该分支就合并到主分支，然后被删除。")]),s._v(" "),e("h3",{attrs:{id:"_4-1-最早的工作流-git-flow"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-最早的工作流-git-flow"}},[s._v("#")]),s._v(" 4.1 最早的工作流——Git Flow")]),s._v(" "),e("p",[s._v("Git Flow 最主要的特点：")]),s._v(" "),e("ol",[e("li",[s._v("项目存在两个长期分支：master、develop")])]),s._v(" "),e("ul",[e("li",[s._v("master 存放发布版本")]),s._v(" "),e("li",[s._v("develop 用于日常开发")])]),s._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[s._v("根据功能需求，存在三类短期分支")])]),s._v(" "),e("ul",[e("li",[s._v("功能分支（feature branch）")]),s._v(" "),e("li",[s._v("补丁分支（hotfix branch）")]),s._v(" "),e("li",[s._v("预发分支（release branch）")])]),s._v(" "),e("p",[s._v("由于它需要同时维护两个长期分支，比较麻烦。而且，这个模式基于"),e("strong",[s._v("版本发布")]),s._v("的，目标是一段时间以后产出一个新版本。")]),s._v(" "),e("p",[s._v("但是，很多网站项目是"),e("strong",[s._v("持续发布")]),s._v("，代码一有变动，就部署一次。这时，master分支和develop分支的差别不大，没必要维护两个长期分支。")]),s._v(" "),e("h3",{attrs:{id:"_4-2-github-flow"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-github-flow"}},[s._v("#")]),s._v(" 4.2 Github Flow")]),s._v(" "),e("p",[s._v("它是 Git Flow 的简化版，只维护一个长期分支，且不区分短期分支的类别。")]),s._v(" "),e("ol",[e("li",[s._v("根据需求拉取新分支")]),s._v(" "),e("li",[s._v("开发完成后，向 master 发起 PR")]),s._v(" "),e("li",[s._v("大家对分支代码进行讨论")]),s._v(" "),e("li",[s._v("PR 被接受，合并进 master，删除分支")])]),s._v(" "),e("p",[s._v("该流程非常简单，适合持续发布。但是对于一些发布和上线存在 gap 的场景下，可能存在 master 最新代码与发布版本不一致的问题，还是要额外再维护一个发布分支。")]),s._v(" "),e("h3",{attrs:{id:"_4-3-gitlab-flow"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-gitlab-flow"}},[s._v("#")]),s._v(" 4.3 Gitlab Flow")]),s._v(" "),e("p",[s._v("Gitlab Flow 综合了两个流程的优点，能够适应不同开发环境的同时，又有单主分支的便利。")]),s._v(" "),e("ul",[e("li",[s._v("上游优先\n"),e("ul",[e("li",[s._v("只存在一个主分支，是所有分支的上游")]),s._v(" "),e("li",[s._v("只有上游分支采纳了的变更，才能应用到其它分支")])])]),s._v(" "),e("li",[s._v("对于持续发布\n"),e("ul",[e("li",[s._v("在 master 分支外，再建立环境分支")]),s._v(" "),e("li",[s._v("master -> pre-production -> production")])])]),s._v(" "),e("li",[s._v("对于版本发布\n"),e("ul",[e("li",[s._v("每次发布，都从 master 拉一个稳定版本分支")]),s._v(" "),e("li",[s._v("只有 bug 修复，才可以合并到该稳定版本分支，并更新小版本号")])])])]),s._v(" "),e("h2",{attrs:{id:"附-实际使用中常见的问题场景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#附-实际使用中常见的问题场景"}},[s._v("#")]),s._v(" 附：实际使用中常见的问题场景")]),s._v(" "),e("h3",{attrs:{id:"如何为-git-配置多个-ssh-key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何为-git-配置多个-ssh-key"}},[s._v("#")]),s._v(" 如何为 git 配置多个 SSH key")]),s._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://gitee.com/help/articles/4229#article-header0",target:"_blank",rel:"noopener noreferrer"}},[s._v("Git 配置多个 SSH-Key"),e("OutboundLink")],1)])]),s._v(" "),e("h3",{attrs:{id:"分支的合并与新建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分支的合并与新建"}},[s._v("#")]),s._v(" 分支的合并与新建")]),s._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%9A%84%E6%96%B0%E5%BB%BA%E4%B8%8E%E5%90%88%E5%B9%B6",target:"_blank",rel:"noopener noreferrer"}},[s._v("分支的新建与合并"),e("OutboundLink")],1)])]),s._v(" "),e("h3",{attrs:{id:"丢弃本地的修改"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#丢弃本地的修改"}},[s._v("#")]),s._v(" 丢弃本地的修改")]),s._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://blog.csdn.net/leedaning/article/details/51304690",target:"_blank",rel:"noopener noreferrer"}},[s._v("git 丢弃本地修改的所有文件（新增、删除、修改）"),e("OutboundLink")],1)])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 丢弃本地所有已修改且未提交的内容")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"查看远程仓库地址"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看远程仓库地址"}},[s._v("#")]),s._v(" 查看远程仓库地址")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote -v\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"版本回退"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#版本回退"}},[s._v("#")]),s._v(" 版本回退")]),s._v(" "),e("p",[s._v("可能做了一些提交，甚至已经 push 到远程仓库了，但是又想回到某个历史版本，可以使用下面方法。")]),s._v(" "),e("p",[s._v("首先，查看下历史提交记录。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看提交记录")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" log\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[e("img",{attrs:{src:a(443),alt:""}})]),s._v(" "),e("p",[s._v("红框部分为 commit_id，这是进行版本回退的关键：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使本地代码回到指定提交历史版本（本地代码被修改）")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset --hard 7714db25c2efef1a359d678f17d75d73bcd3efdb\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("推送远程仓库，把远程也回退到历史版本：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 --force 强制推送，否则会 push 失败（本地与远端版本不一致）")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("your-branch-name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" --force\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"移除本地分支"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#移除本地分支"}},[s._v("#")]),s._v(" 移除本地分支")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当本地分支已经 push 到远端时")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch -d "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("your-branch-name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果还没 push 到远端，可以使用 -D 强制删除")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch -\bD "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("your-branch-name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"将本地代码连接到远程仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#将本地代码连接到远程仓库"}},[s._v("#")]),s._v(" 将本地代码连接到远程仓库")]),s._v(" "),e("p",[s._v("首先，初始化 "),e("code",[s._v("本地仓库")]),s._v(" ，并将文件更新进去：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在本地代码文件夹中")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" init\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"提交信息"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("然后，为本地仓库添加远程地址：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" origin git@gitee.com:anonbug/****.git\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("如果远程仓库为空，可以直接 "),e("code",[s._v("push")]),s._v(" ：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin master\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("如果远程仓库已有其他数据，需要先 pull 下来。因为此时的本地仓库刚初始化，常规 pull 操作会报错 "),e("code",[s._v("fatal: refusing to merge unrelated histories")]),s._v(" 。需要额外添加一个 "),e("code",[s._v("--allow-unrelated-histories")]),s._v(" 命令：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull origin master --allow-unrelated-histories\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("code",[s._v("pull")]),s._v(" 之后会跳出 "),e("code",[s._v("vim编辑器")]),s._v(" 让你写一些说明文字，可以直接使用以下命令退出(冒号也要输入)：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v(":wq\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后再执行 "),e("code",[s._v("push")]),s._v(" 命令就可以了。")]),s._v(" "),e("h3",{attrs:{id:"为-git-切换远程连接的方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为-git-切换远程连接的方式"}},[s._v("#")]),s._v(" 为 git 切换远程连接的方式")]),s._v(" "),e("p",[s._v("在 clone 项目的时候，可以使用 https 方式或 ssh 方式，二者都会为 git 命令生成一个 origin 远程仓库名。")]),s._v(" "),e("p",[s._v("如果需要切换协议，比如为了使用 公钥 简化 push 流程，必须使用 ssh 方式。")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移除现有远端")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" origin\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加新远端")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# git add 远端名（可自定义，比如我习惯改为 gitee） 远端ssh连接")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" gitee git@gitee.com:username/um.git\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);