# 网络层协议
## IPV4/IPV6 协议
> [IP 协议详解](https://www.cnblogs.com/red-code/p/7132023.html)
**IP地址是IP协议提供的一种统一的地址格式，它为互联网上的每一个网络和每一台主机分配一个逻辑地址，以此来屏蔽物理地址的差异。**

根据端到端的设计原则， IP 为主机提供一种无连接、不可靠的、尽力而为的数据包传输服务。

### IPV4
采用32位地址长度，只有4段数字，每一段最大不超过255。

### IPV6
在IPv6的设计过程中除**解决了地址短缺问题**以外，还考虑了在IPv4中解决不好的其它一些问题：
- 端到端IP连接
- 服务质量（QoS）
- 安全性
- 多播
- 移动性
- 即插即用



## DNS 网络
DNS（Domain Name System，域名系统），域名和 IP 地址相互映射的一个分布式数据库，使用户更方便的访问互联网。

> 通俗地讲，我们更习惯于记住一个网站的名字，比如 `www.baidu.com` ，而不是记住它的ip地址，比如：`167.23.10.2`。而计算机更擅长记住网站的ip地址，而不是像 `www.baidu.com` 等链接。因为，DNS就相当于一个电话本，比如你要找 `www.baidu.com` 这个域名，那我翻一翻我的电话本，我就知道，哦，它的电话（ip）是 `167.23.10.2` 。

###　域名解析
通过主机名，最终得到该主机名对应的IP地址的过程。
### 是否存在缓存
本地DNS服务器会首先查询 IP 地址的缓存记录，如果缓存中有此条记录，就可以直接返回结果，此过程是递归的方式进行查询。

递归解析：

当局部DNS服务器自己不能回答客户机的DNS查询时，它就需要向其他DNS服务器进行查询。此时有两种方式，如图所示的是递归方式。局部DNS服务器自己负责向其他DNS服务器进行查询，一般是先向该域名的根域服务器查询，再由根域名服务器一级级向下查询。最后得到的查询结果返回给局部DNS服务器，再由局部DNS服务器返回给客户端。

### DNS 根服务器
如果没有，本地DNS服务器还要向DNS根服务器进行查询。根DNS服务器没有记录具体的域名和IP地址的对应关系，而是告诉本地DNS服务器，你可以到域服务器上去继续查询，并给出域服务器的地址。这种过程是迭代的过程。

迭代解析：

当局部DNS服务器自己不能回答客户机的DNS查询时，也可以通过迭代查询的方式进行解析，如图所示。局部DNS服务器不是自己向其他DNS服务器进行查询，而是把能解析该域名的其他DNS服务器的IP地址返回给客户端DNS程序，客户端DNS程序再继续向这些DNS服务器进行查询，直到得到查询结果为止。也就是说，迭代解析只是帮你找到相关的服务器而已，而不会帮你去查。比如说：baidu.com的服务器ip地址在192.168.4.5这里，你自己去查吧，本人比较忙，只能帮你到这里了。

### 域名服务器
本地DNS服务器继续向域服务器发出请求，域服务器收到请求之后，也不会直接返回域名和IP地址的对应关系，而是告诉本地DNS服务器，你的域名的解析服务器的地址。

### 解析服务器
最后，本地DNS服务器向域名的解析服务器发出请求，这时就能收到一个域名和IP地址对应关系。

### 存入缓存
本地DNS服务器不仅要把IP地址返回给用户电脑，还要把这个对应关系保存在缓存中，以备下次别的用户查询时，可以直接返回结果，加快网络访问。

> **DNS 负载均衡**
> 当一个网站有足够多的用户的时候，假如每次请求的资源都位于同一台机器上面，那么这台机器随时可能会崩掉。
> 处理办法就是用DNS负载均衡技术，它的原理是在DNS服务器中为同一个主机名配置多个IP地址，在应答DNS查询时，DNS服务器对每个查询将以DNS文件中主机记录的IP地址按顺序返回不同的解析结果，将客户端的访问引导到不同的机器上去，使得不同的客户端访问不同的服务器，从而达到负载均衡的目的。例如可以根据每台机器的负载量，该机器离用户地理位置的距离等等。

## CDN 
CDN 的全称是Content Delivery Network，即内容分发网络。CDN是构建在现有网络基础之上的智能虚拟网络，依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，<mark>使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率</mark>。CDN的关键技术主要有内容存储和分发技术。
